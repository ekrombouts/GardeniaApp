# 🔐 Wachtwoord ophalen uit Azure Key Vault
DB_PASSWORD=$(az keyvault secret show --vault-name "kv-gardenia" --name DB-PASS --query value -o tsv)
export DB_PASSWORD

# 🐳 Docker: containers
docker ps                        # Actieve containers
docker container ls             # Actieve containers
docker container ls -a          # Alle containers

# 🐳 Docker: images
docker image ls                 # Overzicht van images

# 🐳 Docker: volumes
docker volume ls                # Overzicht van volumes

# 🛑 Containers stoppen
docker-compose down --remove-orphans
# of
docker-compose -f docker-compose.prod.yml down --remove-orphans

# 🧹 Opschonen en opnieuw opstarten
docker system prune -af                    # Verwijder ongebruikte containers, images, volumes (volumes? toch niet, hij is voorzichtig)
docker-compose build --no-cache           # Build zonder cache
docker-compose up -d                      # Start containers in background

# ℹ️ Opmerking:
# - Met -p geef je een prefix voor container/volume/netwerk.
# - Zonder -p gebruikt Docker de mapnaam.

# Maak het netwerk
docker network create gardenia-net

# start db-container met projectnaam 'gardenia'
docker-compose -f docker-compose.db.yml -p gardenia up -d

# stop container, behoud image en volume
docker-compose -f docker-compose.db.yml -p gardenia stop

# verwijdert containers, netwerk en (optioneel) volumes. Volume blijft standaard staan, tenzij je --volumes toevoegt.
docker-compose -f docker-compose.db.yml -p gardenia down

# start je productie-app
docker-compose -f docker-compose.prod.yml -p gardenia-prod up -d --build

# start je test-app
docker-compose -f docker-compose.test.yml -p gardenia-test up -d --build
